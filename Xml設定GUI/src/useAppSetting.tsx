import React from "react"
import useEvent from "react-use-event-hook"
import * as Input from "./__autoGenerated/input"
import * as Layout from "./__autoGenerated/collection"

export const useAppSetting = (
  backendDomain: string | undefined,
  onChangBackendDomain: (v: string | undefined) => void,
  editingXmlFilePath: string | undefined,
) => {
  const [, dispatchDialog] = Layout.useDialogContext()

  const openAppSettingDialog = useEvent(() => {
    dispatchDialog(state => state.pushDialog('設定', context => (
      <div className="grid grid-cols-[10rem,1fr] gap-x-2 gap-y-4">
        <Label>バックエンドURL</Label>
        <Input.Word value={backendDomain} onChange={onChangBackendDomain} className="flex-1" />

        <Label>ファイル名</Label>
        <span className="flex-1 select-all">{editingXmlFilePath}</span>
      </div>
    )))
  })

  return {
    openAppSettingDialog,
  }
}

const Label = ({ children }: { children?: React.ReactNode }) => {
  return (
    <span className="select-none text-color-6 text-right">
      {children}
    </span>
  )
}
