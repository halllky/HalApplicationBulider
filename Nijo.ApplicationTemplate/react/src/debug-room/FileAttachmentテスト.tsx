import useEvent from "react-use-event-hook"
import { FileAttachmentMetadata, IconButton, useFormEx, useHttpRequest } from "../__autoGenerated"
import { FileAttachmentView } from "../__autoGenerated/input/FileAttachment"


export default function () {

  const { registerEx, handleSubmit } = useFormEx<PageState>({
    defaultValues: {
      file1: { displayFileName: 'vite.svg' },
    },
  })

  const { complexPost } = useHttpRequest()
  const handleClick = useEvent((data: PageState) => {
    complexPost('/fashfklehe24234k', data)
  })

  return (
    <form onSubmit={handleSubmit(handleClick)} className="flex flex-col gap-2 max-w-lg m-auto items-start">
      <FileAttachmentView {...registerEx('file1')} />
      <FileAttachmentView {...registerEx('file2')} />
      <FileAttachmentView {...registerEx('file3')} />
      <hr className="border border-color-3 self-stretch" />
      <IconButton submit fill>保存</IconButton>
    </form>
  )
}


type PageState = {
  file1?: FileAttachmentMetadata
  file2?: FileAttachmentMetadata
  file3?: FileAttachmentMetadata
}
