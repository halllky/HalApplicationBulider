@echo off

@REM アプリケーションテンプレートをzip化してビルド後ディレクトリに配置する。
@REM このスクリプトはビルド成功後に実行される。
@REM - 第1引数: MSBuildの $(ProjectDir)
@REM - 第2引数: MSBuildの $(OutDir)

set PROJECT_DIR=%1
set OUT_DIR=%PROJECT_DIR%%2

set SOURCE_DIR=%PROJECT_DIR%..\Nijo.ApplicationTemplates
set TARGET_DIR=%OUT_DIR%ApplicationTemplates

set EXEC_COPY=robocopy /NFL /NDL /NJH /NJS /nc /ns /np

echo:
echo アプリケーションテンプレートの同梱を開始します。
echo SOURCE: %SOURCE_DIR%
echo TARGET: %TARGET_DIR%
echo:

pushd "%SOURCE_DIR%"

%EXEC_COPY%    REACT_AND_WEBAPI\react        "%TARGET_DIR%"\REACT_AND_WEBAPI\react
%EXEC_COPY% /s REACT_AND_WEBAPI\react\public "%TARGET_DIR%"\REACT_AND_WEBAPI\react\public
%EXEC_COPY% /s REACT_AND_WEBAPI\react\src    "%TARGET_DIR%"\REACT_AND_WEBAPI\react\src

%EXEC_COPY%    REACT_AND_WEBAPI\webapi                 "%TARGET_DIR%"\REACT_AND_WEBAPI\webapi
%EXEC_COPY% /s REACT_AND_WEBAPI\webapi\Properties      "%TARGET_DIR%"\REACT_AND_WEBAPI\webapi\Properties
%EXEC_COPY% /s REACT_AND_WEBAPI\webapi\__AutoGenerated "%TARGET_DIR%"\REACT_AND_WEBAPI\webapi\__AutoGenerated

popd
exit /b 0
